<%- include("partials/navbar.ejs") %>

<style>
.views-container {
    max-width: 500px;
    margin: 80px auto;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
}

.views-header {
    padding: 14px;
    font-weight: 600;
    text-align: center;
    border-bottom: 1px solid var(--border);
    color: var(--text);
    background: var(--card);
}

.viewer {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-bottom: 1px solid var(--border);
    background: var(--card);
}

.viewer:last-child {
    border-bottom: none;
}

.viewer img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
}

.viewer b {
    color: var(--text);
}

.time {
    font-size: 12px;
    color: var(--muted);
}
</style>

<div class="views-container">
    <div class="views-header">Story Views</div>

    <% if (viewers.length === 0) { %>
        <p style="padding:20px; text-align:center; color:var(--muted);">
            No views yet
        </p>
    <% } %>

    <% viewers.forEach(v => { %>
        <a href="/profile/<%= v.id %>" style="text-decoration:none;">
            <div class="viewer">
                <% if (v.avatar) { %>
                    <img src="/uploads/<%= v.avatar %>">
                <% } else { %>
                    <img src="/uploads/default-avatar.png">
                <% } %>

                <div>
                    <b>@<%= v.username %></b>
                    <div class="time">
                        Viewed <%= new Date(v.viewed_at).toLocaleString() %>
                    </div>
                </div>
            </div>
        </a>
    <% }) %>
</div>

